(function(e){e.fn.bxSlider=function(t){var n={mode:"horizontal",childSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,delay:2e3,easing:"swing",slideMargin:0,startSlide:0,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,controls:true,controlsSelector:null,nextText:">",prevText:"<",startText:"Start",stopText:"Stop",auto:false,autoStart:true,autoDirection:"next",autoControls:false,autoControlsCombine:false,autoHover:false,autoDelay:0,captions:false,ticker:false,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,adaptiveHeight:true,adaptiveHeightSpeed:500,touchEnabled:true,swipeThreashold:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};var r=this;var i={};var s=function(){i.settings=e.extend({},n,t);i.children=r.children(i.settings.childSelector);i.active={index:i.settings.startSlide};i.loaded=false;i.carousel=i.settings.minSlides>1||i.settings.maxSlides>1;i.minThreashold=i.settings.minSlides*i.settings.slideWidth+(i.settings.minSlides-1)*i.settings.slideMargin;i.maxThreashold=i.settings.maxSlides*i.settings.slideWidth+(i.settings.maxSlides-1)*i.settings.slideMargin;i.working=false;i.controls={};o();if(i.settings.ticker)O();if(i.settings.pager)T(i.settings.startSlide);if(i.settings.controls)k();if(i.settings.touchEnabled)L()};var o=function(){r.wrap('<div class="bx-viewport" />');i.viewport=r.parent();i.loader=e('<div class="bx-loading" />');i.viewport.prepend(i.loader);r.css({width:i.settings.mode=="horizontal"?"999999px":"auto",height:0,position:"relative",margin:0,padding:0});i.viewport.css({width:"100%",height:"50",overflow:"hidden",position:"relative"});i.children.css({"float":i.settings.mode=="horizontal"?"left":"none",width:f(),listStyle:"none",marginRight:i.settings.mode=="horizontal"?i.settings.slideMargin:0,marginBottom:i.settings.mode=="vertical"?i.settings.slideMargin:0});if(i.settings.mode=="fade"){i.children.css({position:"absolute",zIndex:0,display:"none"});r.children().eq(i.settings.startSlide).css({zIndex:50,display:"block"})}i.controls.el=e('<div class="bx-controls bx-clearfix" />');if(i.settings.captions)y();if(i.settings.infiniteLoop&&!i.carousel&&i.settings.mode!="fade"){var t=r.children(":first").clone().addClass("bx-clone");var n=r.children(":last").clone().addClass("bx-clone");r.append(t).prepend(n)}i.active.last=i.settings.startSlide==c()-1;u(function(){p();if(i.settings.mode=="vertical")i.settings.adaptiveHeight=true;i.viewport.animate({height:a()},200);if(i.settings.auto&&i.settings.autoStart)A();i.settings.onSliderLoad();i.loaded=true});if(!i.settings.ticker){if(i.settings.pager)v();if(i.settings.controls)m();if(i.settings.auto&&i.settings.autoControls)g();if(i.settings.controls||i.settings.autoControls||i.settings.pager)i.viewport.after(i.controls.el)}};var u=function(t){var n=r.find("img");var s=0;if(n.length>0){n.each(function(r){var o=e(this);o.load(function(){++s;if(n.length==s){i.loader.remove();t()}})}).each(function(){if(this.complete)e(this).load()})}else{t()}};var a=function(){var t=0;var n="";if(i.settings.mode!="vertical"&&!i.settings.adaptiveHeight){n=r.children(":not(.bx-clone)")}else{if(!i.carousel){n=r.children(":not(.bx-clone)").eq(i.active.index)}else{if(i.active.last){n=r.children().slice(i.children.length-i.settings.minSlides,i.children.length)}else{n=r.children().slice(i.active.index*h(),i.settings.minSlides+i.active.index*h())}}}if(i.settings.mode=="vertical"){n.each(function(n){t+=e(this).outerHeight()});if(i.settings.slideMargin>0){t+=i.settings.slideMargin*(i.settings.minSlides-1)}}else{t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight()}).get())}return t};var f=function(){var e=i.settings.slideWidth;var t=i.viewport.width();if(i.settings.slideWidth==0){e=t}else{if(t>i.maxThreashold){e=(t-i.settings.slideMargin*(i.settings.maxSlides-1))/i.settings.maxSlides}else if(t<i.minThreashold){e=(t-i.settings.slideMargin*(i.settings.minSlides-1))/i.settings.minSlides}}return e};var l=function(){var e=1;if(i.settings.mode=="horizontal"){if(i.viewport.width()<i.minThreashold){e=i.settings.minSlides}else if(i.viewport.width()>i.maxThreashold){e=i.settings.maxSlides}else{var t=r.children(":first").width();e=Math.floor(i.viewport.width()/t)}}else if(i.settings.mode=="vertical"){e=i.settings.minSlides}return e};var c=function(){var e=0;if(i.settings.moveSlides>0){var t=0;var n=0;while(t<i.children.length){++e;t=n+l();n+=i.settings.moveSlides<=l()?i.settings.moveSlides:l()}}else{e=Math.ceil(i.children.length/l())}return e};var h=function(){if(i.settings.moveSlides>0&&i.settings.moveSlides<=l()){return i.settings.moveSlides}return l()};var p=function(){if(i.active.last){if(i.settings.mode=="horizontal"){var e=r.children(":not(.bx-clone):last");var t=e.position();r.css("left",-(t.left-(i.viewport.width()-e.width())))}else if(i.settings.mode=="vertical"){var n=i.children.length-i.settings.minSlides;var t=r.children().not(".bx-clone").eq(n).position();r.css("top",-t.top)}}else{var t=r.children().not(".bx-clone").eq(i.active.index*h()).position();if(i.active.index==c()-1)i.active.last=true;if(t!=undefined){if(i.settings.mode=="horizontal")r.css("left",-t.left);else if(i.settings.mode=="vertical")r.css("top",-t.top)}}};var d=function(){var t="";pagerQty=c();for(var n=0;n<pagerQty;n++){var r=i.settings.buildPager&&e.isFunction(i.settings.buildPager)?i.settings.buildPager(n,e(val)):n+1;t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+r+"</a></div>"}i.pagerEl.html(t)};var v=function(){i.pagerEl=e('<div class="bx-pager" />');i.pagerEl.delegate(".bx-pager-link","click",x);if(i.settings.pagerSelector){e(i.settings.pagerSelector).html(i.pagerEl)}else{i.controls.el.addClass("bx-has-pager").append(i.pagerEl)}d()};var m=function(){i.controls.next=e('<a class="bx-next" href="">'+i.settings.nextText+"</a>");i.controls.prev=e('<a class="bx-prev" href="">'+i.settings.prevText+"</a>");i.controls.directionEl=e('<div class="bx-controls-direction" />');i.controls.directionEl.delegate(".bx-next","click",b);i.controls.directionEl.delegate(".bx-prev","click",w);i.controls.directionEl.append(i.controls.prev).append(i.controls.next);if(i.settings.controlsSelector){e(i.settings.controlsSelector).html(i.controls.directionEl)}else{i.controls.el.addClass("bx-has-controls-direction").append(i.controls.directionEl)}};var g=function(){i.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+i.settings.startText+"</a></div>");i.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+i.settings.stopText+"</a></div>");i.controls.autoEl=e('<div class="bx-controls-auto" />');i.controls.autoEl.delegate(".bx-start","click",E);i.controls.autoEl.delegate(".bx-stop","click",S);if(i.settings.autoControlsCombine){i.controls.autoEl.append(i.controls.start)}else{i.controls.autoEl.append(i.controls.start).append(i.controls.stop)}if(i.settings.autoControlsSelector){e(i.settings.autoControlsSelector).html(i.controls.autoEl)}else{i.controls.el.addClass("bx-has-controls-auto").append(i.controls.autoEl)}C(i.settings.autoStart?"stop":"start")};var y=function(){r.children().each(function(t){var n=e(this).find("img:first").attr("title");e(this).append('<div class="bx-caption"><span>'+n+"</span></div>")})};var b=function(e){if(i.settings.auto)r.stopAuto();r.goToNextSlide();e.preventDefault()};var w=function(e){if(i.settings.auto)r.stopAuto();r.goToPrevSlide();e.preventDefault()};var E=function(e){r.startAuto();e.preventDefault()};var S=function(e){r.stopAuto();e.preventDefault()};var x=function(t){if(i.settings.auto)r.stopAuto();var n=e(t.currentTarget);var s=parseInt(n.attr("data-slide-index"));if(s!=i.active.index)r.goToSlide(s);t.preventDefault()};var T=function(e){if(i.settings.pagerType=="short"){i.pagerEl.html(e+1+i.settings.pagerShortSeparator+i.children.length);return}i.pagerEl.find("a").removeClass("active");i.pagerEl.find("a").eq(e).addClass("active")};var N=function(){if(!i.carousel&&i.settings.infiniteLoop){if(i.active.index==0){var e=r.children(":not(.bx-clone)").eq(0).position();if(i.settings.mode=="horizontal"){r.css("left",-e.left)}else if(i.settings.mode=="vertical"){r.css("top",-e.top)}}else if(i.active.index==i.children.length-1){var e=r.children(":not(.bx-clone)").eq(i.children.length-1).position();if(i.settings.mode=="horizontal"){r.css("left",-e.left)}else if(i.settings.mode=="vertical"){r.css("top",-e.top)}}}i.working=false;i.settings.onSlideAfter(r.children().eq(i.active.index))};var C=function(e){if(i.settings.autoControlsCombine){i.controls.autoEl.html(i.controls[e])}else{i.controls.autoEl.find("a").removeClass("active");i.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active")}};var k=function(){if(!i.settings.infiniteLoop&&i.settings.hideControlOnEnd){i.controls.directionEl.empty();if(i.active.index==0){i.controls.directionEl.append(i.controls.next)}else if(i.active.index==c()-1){i.controls.directionEl.append(i.controls.prev)}else{i.controls.directionEl.append(i.controls.prev,i.controls.next)}}};var L=function(){i.touch={start:{x:null,y:null},end:{x:null,y:null}};i.viewport.bind("touchstart",function(e){var t=e.originalEvent;i.touch.start.x=t.changedTouches[0].pageX});i.viewport.bind("touchend",function(e){var t=e.originalEvent;i.touch.end.x=t.changedTouches[0].pageX;var n=Math.abs(i.touch.start.x-i.touch.end.x);if(n>=i.settings.swipeThreashold){if(i.touch.start.x>i.touch.end.x){r.goToNextSlide()}else{r.goToPrevSlide()}}})};var A=function(){if(i.settings.autoDelay>0){var e=setTimeout(r.startAuto,i.settings.autoDelay)}else{r.startAuto()}if(i.settings.autoHover){r.hover(function(){if(i.interval){r.stopAuto(true);i.autoPaused=true}},function(){if(i.autoPaused){r.startAuto(true);i.autoPaused=null}})}};var O=function(){if(i.settings.autoDirection=="next"){r.append(r.children().clone().addClass("bx-clone"))}else{r.prepend(r.children().clone().addClass("bx-clone"));r.css("left",-r.children().eq(i.children.length).position().left)}i.settings.pager=false;i.settings.controls=false;i.settings.autoControls=false;M()};var M=function(){var e=0;var t=0;if(i.settings.autoDirection=="next"){e=-r.children().eq(i.children.length).position().left}else{t=-r.children(":not(.bx-clone):first").position().left}r.animate({left:e},i.settings.speed,"linear",function(){r.css("left",t);M()})};r.goToSlide=function(t,n){if(i.working||i.active.index==t)return;i.working=true;if(t<0){i.active.index=i.children.length-1}else if(t>=i.children.length){i.active.index=0}else{i.active.index=t}i.settings.onSlideBefore(r.children().eq(i.active.index));if(n=="next"){i.settings.onSlideNext(r.children().eq(i.active.index))}else if(n=="prev"){i.settings.onSlidePrev(r.children().eq(i.active.index))}i.active.last=t>=c()-1;if(i.settings.pager)T(i.active.index);if(i.settings.controls)k();if(i.settings.mode=="fade"){if(i.settings.adaptiveHeight&&i.viewport.height()!=a()){i.viewport.animate({height:a()},i.settings.adaptiveHeightSpeed)}r.children(":visible").fadeOut(i.settings.speed).css({zIndex:0});r.children().eq(i.active.index).css("zIndex",51).fadeIn(i.settings.speed,function(){e(this).css("zIndex",50);N()})}else{if(i.settings.adaptiveHeight&&i.viewport.height()!=a()){i.viewport.animate({height:a()},i.settings.adaptiveHeightSpeed)}var s=0;var o={left:0,top:0};if(i.carousel&&i.active.last){if(i.settings.mode=="horizontal"){var u=r.children().eq(i.children.length-1);o=u.position();s=i.viewport.width()-u.width()}else{var f=i.children.length-i.settings.minSlides;o=r.children().eq(f).position()}}else if(i.active.last&&i.active.index==0){o=r.find(".bx-clone:last").position()}else if(t>=0){var l=t*h();o=r.children().not(".bx-clone").eq(l).position()}var p=i.settings.mode=="horizontal"?{left:-(o.left-s)}:{top:-o.top};r.animate(p,i.settings.speed,i.settings.easing,function(){N()})}};r.goToNextSlide=function(){if(!i.settings.infiniteLoop&&i.active.last)return;var e=i.active.index+1;if(i.carousel&&i.settings.infiniteLoop&&e>=c())e=0;r.goToSlide(e,"next")};r.goToPrevSlide=function(){if(!i.settings.infiniteLoop&&i.active.index==0)return;var e=i.active.index-1;if(i.carousel&&i.settings.infiniteLoop&&e<0)e=c()-1;r.goToSlide(e,"prev")};r.startAuto=function(e){if(i.interval)return;i.interval=setInterval(function(){i.settings.autoDirection=="next"?r.goToNextSlide():r.goToPrevSlide()},i.settings.delay);if(i.settings.autoControls&&e!=true)C("stop")};r.stopAuto=function(e){if(!i.interval)return;clearInterval(i.interval);i.interval=null;if(i.settings.autoControls&&e!=true)C("start")};r.getCurrentSlide=function(){return i.active.index};r.getSlideCount=function(){return i.children.length};var _=e(window).width();var D=e(window).height();e(window).resize(function(){var t=e(window).width();var n=e(window).height();if(_!=t||D!=n){_=t;D=n;r.children().width(f());if(i.loaded)i.viewport.css("height",a());if(i.active.last)i.active.index=c()-1;if(i.active.index>=c())i.active.last=true;if(i.settings.pager){d();T(i.active.index)}p()}});s();return this}})(jQuery)