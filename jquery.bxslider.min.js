;(function($){$.fn.bxSlider=function(options){var defaults={mode:'horizontal',childSelector:'',infiniteLoop:true,hideControlOnEnd:false,speed:500,delay:2000,easing:'swing',slideMargin:0,startSlide:0,pager:true,pagerType:'full',pagerShortSeparator:' / ',pagerSelector:null,buildPager:null,controls:true,controlsSelector:null,nextText:'Next',prevText:'Prev',startText:'Start',stopText:'Stop',auto:false,autoStart:true,autoDirection:'next',autoControls:false,autoControlsCombine:false,autoHover:false,autoDelay:0,captions:false,ticker:false,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,adaptiveHeight:true,adaptiveHeightSpeed:500,touchEnabled:true,swipeThreashold:50,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}}
var el=this;var slider={}
var init=function(){slider.settings=$.extend({},defaults,options);slider.children=el.children(slider.settings.childSelector);slider.active={index:slider.settings.startSlide}
slider.loaded=false;slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1;slider.minThreashold=(slider.settings.minSlides*slider.settings.slideWidth)+((slider.settings.minSlides-1)*slider.settings.slideMargin);slider.maxThreashold=(slider.settings.maxSlides*slider.settings.slideWidth)+((slider.settings.maxSlides-1)*slider.settings.slideMargin);slider.working=false;slider.controls={}
setup();if(slider.settings.ticker)initTicker();if(slider.settings.pager)updatePagerActive(slider.settings.startSlide);if(slider.settings.controls)updateDirectionControls();if(slider.settings.touchEnabled)initTouch();}
var setup=function(){el.wrap('<div class="bx-viewport" />');slider.viewport=el.parent();slider.loader=$('<div class="bx-loading" />');slider.viewport.prepend(slider.loader);el.css({width:slider.settings.mode=='horizontal'?'999999px':'auto',height:0,overflow:'hidden',position:'relative',margin:0,padding:0});slider.viewport.css({width:'100%',height:'50',overflow:'hidden',position:'relative'});slider.children.css({float:slider.settings.mode=='horizontal'?'left':'none',position:'relative',width:getSlideWidth(),listStyle:'none',marginRight:slider.settings.mode=='horizontal'?slider.settings.slideMargin:0,marginBottom:slider.settings.mode=='vertical'?slider.settings.slideMargin:0});if(slider.settings.mode=='fade'){slider.children.css({position:'absolute',zIndex:0,display:'none'});el.children().eq(slider.settings.startSlide).css({zIndex:50,display:'block'});}
slider.controls.el=$('<div class="bx-controls bx-clearfix" />');if(slider.settings.captions)appendCaptions();if(slider.settings.infiniteLoop&&!slider.carousel&&slider.settings.mode!='fade'){var cloneAppend=el.children(':first').clone().addClass('bx-clone');var clonePrepend=el.children(':last').clone().addClass('bx-clone');el.append(cloneAppend).prepend(clonePrepend);}
slider.active.last=slider.settings.startSlide==getPagerQty()-1
preloadImages(function(){el.css('overflow','visible');setSlidePosition();if(slider.settings.mode=='vertical')slider.settings.adaptiveHeight=true;slider.viewport.animate({height:getViewportHeight()},200);if(slider.settings.auto&&slider.settings.autoStart)initAuto();slider.settings.onSliderLoad();slider.loaded=true;});if(!slider.settings.ticker){if(slider.settings.pager)appendPager();if(slider.settings.controls)appendControls();if(slider.settings.auto&&slider.settings.autoControls)appendControlsAuto();if(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)slider.viewport.after(slider.controls.el);}}
var preloadImages=function(callback){var images=el.find('img');var loaded=0;if(images.length>0){images.each(function(index){var img=$(this);img.load(function(){++loaded;if(images.length==loaded){slider.loader.remove();callback();}});}).each(function(){if(this.complete)$(this).load();});}else{callback();}}
var getViewportHeight=function(){var height=0;var children='';if(slider.settings.mode!='vertical'&&!slider.settings.adaptiveHeight){children=el.children(':not(.bx-clone)');}else{if(!slider.carousel){children=el.children(':not(.bx-clone)').eq(slider.active.index);}else{if(slider.active.last){children=el.children().slice(slider.children.length-slider.settings.minSlides,slider.children.length);}else{children=el.children().slice(slider.active.index*getMoveBy(),slider.settings.minSlides+(slider.active.index*getMoveBy()));}}}
if(slider.settings.mode=='vertical'){children.each(function(index){height+=$(this).outerHeight();});if(slider.settings.slideMargin>0){height+=slider.settings.slideMargin*(slider.settings.minSlides-1);}}else{height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight();}).get());}
return height;}
var getSlideWidth=function(){var newElWidth=slider.settings.slideWidth;var wrapWidth=slider.viewport.width();if(slider.settings.slideWidth==0){newElWidth=wrapWidth;}else{if(wrapWidth>slider.maxThreashold){newElWidth=(wrapWidth-(slider.settings.slideMargin*(slider.settings.maxSlides-1)))/slider.settings.maxSlides;}else if(wrapWidth<slider.minThreashold){newElWidth=(wrapWidth-(slider.settings.slideMargin*(slider.settings.minSlides-1)))/slider.settings.minSlides;}}
return newElWidth;}
var getNumberSlidesShowing=function(){var slidesShowing=1;if(slider.settings.mode=='horizontal'){if(slider.viewport.width()<slider.minThreashold){slidesShowing=slider.settings.minSlides;}else if(slider.viewport.width()>slider.maxThreashold){slidesShowing=slider.settings.maxSlides;}else{var childWidth=el.children(':first').width();slidesShowing=Math.floor(slider.viewport.width()/childWidth);}}else if(slider.settings.mode=='vertical'){slidesShowing=slider.settings.minSlides;}
return slidesShowing;}
var getPagerQty=function(){var pagerQty=0;if(slider.settings.moveSlides>0){var breakPoint=0;var counter=0
while(breakPoint<slider.children.length){++pagerQty;breakPoint=counter+getNumberSlidesShowing();counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing();}}else{pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());}
return pagerQty;}
var getMoveBy=function(){if(slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing()){return slider.settings.moveSlides;}
return getNumberSlidesShowing();}
var setSlidePosition=function(){if(slider.active.last){if(slider.settings.mode=='horizontal'){var lastChild=el.children(':not(.bx-clone):last');var position=lastChild.position();el.css('left',-(position.left-(slider.viewport.width()-lastChild.width())));}else if(slider.settings.mode=='vertical'){var lastShowingIndex=slider.children.length-slider.settings.minSlides;var position=el.children().not('.bx-clone').eq(lastShowingIndex).position();el.css('top',-position.top);}}else{var position=el.children().not('.bx-clone').eq(slider.active.index*getMoveBy()).position();if(slider.active.index==getPagerQty()-1)slider.active.last=true;if(position!=undefined){if(slider.settings.mode=='horizontal')el.css('left',-position.left);else if(slider.settings.mode=='vertical')el.css('top',-position.top);}}}
var populatePager=function(){var pagerHtml='';pagerQty=getPagerQty();for(var i=0;i<pagerQty;i++){var linkContent=slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)?slider.settings.buildPager(i,$(val)):i+1;pagerHtml+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+linkContent+'</a></div>';};slider.pagerEl.html(pagerHtml);}
var appendPager=function(){slider.pagerEl=$('<div class="bx-pager" />');slider.pagerEl.delegate('.bx-pager-link','click',clickPagerBind);if(slider.settings.pagerSelector){$(slider.settings.pagerSelector).html(slider.pagerEl);}else{slider.controls.el.addClass('bx-has-pager').append(slider.pagerEl);}
populatePager();}
var appendControls=function(){slider.controls.next=$('<a class="bx-next" href="">'+slider.settings.nextText+'</a>');slider.controls.prev=$('<a class="bx-prev" href="">'+slider.settings.prevText+'</a>');slider.controls.directionEl=$('<div class="bx-controls-direction" />');slider.controls.directionEl.delegate('.bx-next','click',clickNextBind);slider.controls.directionEl.delegate('.bx-prev','click',clickPrevBind);slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);if(slider.settings.controlsSelector){$(slider.settings.controlsSelector).html(slider.controls.directionEl);}else{slider.viewport.append(slider.controls.directionEl);}}
var appendControlsAuto=function(){slider.controls.start=$('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+'</a></div>');slider.controls.stop=$('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+'</a></div>');slider.controls.autoEl=$('<div class="bx-controls-auto" />');slider.controls.autoEl.delegate('.bx-start','click',clickStartBind);slider.controls.autoEl.delegate('.bx-stop','click',clickStopBind);if(slider.settings.autoControlsCombine){slider.controls.autoEl.append(slider.controls.start);}else{slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);}
if(slider.settings.autoControlsSelector){$(slider.settings.autoControlsSelector).html(slider.controls.autoEl);}else{slider.controls.el.addClass('bx-has-controls-auto').append(slider.controls.autoEl);}
updateAutoControls(slider.settings.autoStart?'stop':'start');}
var appendCaptions=function(){el.children().each(function(index){var title=$(this).find('img:first').attr('title');$(this).append('<div class="bx-caption"><span>'+title+'</span></div>');});}
var clickNextBind=function(e){if(slider.settings.auto)el.stopAuto();el.goToNextSlide();e.preventDefault();}
var clickPrevBind=function(e){if(slider.settings.auto)el.stopAuto();el.goToPrevSlide();e.preventDefault();}
var clickStartBind=function(e){el.startAuto();e.preventDefault();}
var clickStopBind=function(e){el.stopAuto();e.preventDefault();}
var clickPagerBind=function(e){if(slider.settings.auto)el.stopAuto();var pagerLink=$(e.currentTarget);var pagerIndex=parseInt(pagerLink.attr('data-slide-index'));if(pagerIndex!=slider.active.index)el.goToSlide(pagerIndex);e.preventDefault();}
var updatePagerActive=function(slideIndex){if(slider.settings.pagerType=='short'){slider.pagerEl.html((slideIndex+1)+slider.settings.pagerShortSeparator+slider.children.length);return;}
slider.pagerEl.find('a').removeClass('active');slider.pagerEl.find('a').eq(slideIndex).addClass('active');}
var updateAfterSlideTransition=function(){if(!slider.carousel&&slider.settings.infiniteLoop){if(slider.active.index==0){var position=el.children(':not(.bx-clone)').eq(0).position();if(slider.settings.mode=='horizontal'){el.css('left',-position.left);}
else if(slider.settings.mode=='vertical'){el.css('top',-position.top);}}else if(slider.active.index==slider.children.length-1){var position=el.children(':not(.bx-clone)').eq(slider.children.length-1).position();if(slider.settings.mode=='horizontal'){el.css('left',-position.left);}
else if(slider.settings.mode=='vertical'){el.css('top',-position.top);}}}
slider.working=false;slider.settings.onSlideAfter(el.children().eq(slider.active.index));}
var updateAutoControls=function(state){if(slider.settings.autoControlsCombine){slider.controls.autoEl.html(slider.controls[state]);}else{slider.controls.autoEl.find('a').removeClass('active');slider.controls.autoEl.find('a:not(.bx-'+state+')').addClass('active');}}
var updateDirectionControls=function(){if(!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd){slider.controls.directionEl.empty();if(slider.active.index==0){slider.controls.directionEl.append(slider.controls.next);}else if(slider.active.index==getPagerQty()-1){slider.controls.directionEl.append(slider.controls.prev);}else{slider.controls.directionEl.append(slider.controls.prev,slider.controls.next);}}}
var initTouch=function(){slider.touch={start:{x:null,y:null},end:{x:null,y:null}}
slider.viewport.bind('touchstart',function(e){var orig=e.originalEvent;slider.touch.start.x=orig.changedTouches[0].pageX;});slider.viewport.bind('touchend',function(e){var orig=e.originalEvent;slider.touch.end.x=orig.changedTouches[0].pageX;var distance=Math.abs(slider.touch.start.x-slider.touch.end.x);if(distance>=slider.settings.swipeThreashold){if(slider.touch.start.x>slider.touch.end.x){el.goToNextSlide();}else{el.goToPrevSlide();}}});}
var initAuto=function(){if(slider.settings.autoDelay>0){var timeout=setTimeout(el.startAuto,slider.settings.autoDelay);}else{el.startAuto();}
if(slider.settings.autoHover){el.hover(function(){if(slider.interval){el.stopAuto(true);slider.autoPaused=true;}},function(){if(slider.autoPaused){el.startAuto(true);slider.autoPaused=null;}});}}
var initTicker=function(){if(slider.settings.autoDirection=='next'){el.append(el.children().clone().addClass('bx-clone'));}else{el.prepend(el.children().clone().addClass('bx-clone'));el.css('left',-(el.children().eq(slider.children.length).position().left));}
slider.settings.pager=false;slider.settings.controls=false;slider.settings.autoControls=false;tickerLoop();}
var tickerLoop=function(){var position=0;var reset=0;if(slider.settings.autoDirection=='next'){position=-(el.children().eq(slider.children.length).position().left);}else{reset=-(el.children(':not(.bx-clone):first').position().left);}
el.animate({left:position},slider.settings.speed,'linear',function(){el.css('left',reset);tickerLoop();});}
el.goToSlide=function(slideIndex,direction){if(slider.working||slider.active.index==slideIndex)return;slider.working=true;if(slideIndex<0){slider.active.index=slider.children.length-1;}else if(slideIndex>=slider.children.length){slider.active.index=0;}else{slider.active.index=slideIndex;}
slider.settings.onSlideBefore(el.children().eq(slider.active.index));if(direction=='next'){slider.settings.onSlideNext(el.children().eq(slider.active.index));}else if(direction=='prev'){slider.settings.onSlidePrev(el.children().eq(slider.active.index));}
slider.active.last=slideIndex>=getPagerQty()-1;if(slider.settings.pager)updatePagerActive(slider.active.index);if(slider.settings.controls)updateDirectionControls();if(slider.settings.mode=='fade'){if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
el.children(':visible').fadeOut(slider.settings.speed).css({zIndex:0});el.children().eq(slider.active.index).css('zIndex',51).fadeIn(slider.settings.speed,function(){$(this).css('zIndex',50);updateAfterSlideTransition();});}else{if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
var moveBy=0;var position={left:0,top:0};if(slider.carousel&&slider.active.last){if(slider.settings.mode=='horizontal'){var lastChild=el.children().eq(slider.children.length-1);position=lastChild.position();moveBy=slider.viewport.width()-lastChild.width();}else{var lastShowingIndex=slider.children.length-slider.settings.minSlides;position=el.children().eq(lastShowingIndex).position();}}else if(slider.active.last&&slider.active.index==0){position=el.find('.bx-clone:last').position();}else if(slideIndex>=0){var requestEl=slideIndex*getMoveBy();position=el.children().not('.bx-clone').eq(requestEl).position();}
var animateProperty=slider.settings.mode=='horizontal'?{left:-(position.left-moveBy)}:{top:-position.top}
el.animate(animateProperty,slider.settings.speed,slider.settings.easing,function(){updateAfterSlideTransition();});}}
el.goToNextSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.last)return;var pagerIndex=slider.active.index+1;if(slider.carousel&&slider.settings.infiniteLoop&&pagerIndex>=getPagerQty())pagerIndex=0;el.goToSlide(pagerIndex,'next');}
el.goToPrevSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.index==0)return;var pagerIndex=slider.active.index-1;if(slider.carousel&&slider.settings.infiniteLoop&&pagerIndex<0)pagerIndex=getPagerQty()-1;el.goToSlide(pagerIndex,'prev');}
el.startAuto=function(preventControlUpdate){if(slider.interval)return;slider.interval=setInterval(function(){slider.settings.autoDirection=='next'?el.goToNextSlide():el.goToPrevSlide();},slider.settings.delay);if(slider.settings.autoControls&&preventControlUpdate!=true)updateAutoControls('stop');}
el.stopAuto=function(preventControlUpdate){if(!slider.interval)return;clearInterval(slider.interval);slider.interval=null;if(slider.settings.autoControls&&preventControlUpdate!=true)updateAutoControls('start');}
el.getCurrentSlide=function(){return slider.active.index;}
el.getSlideCount=function(){return slider.children.length;}
var windowWidth=$(window).width();var windowHeight=$(window).height();$(window).resize(function(){var windowWidthNew=$(window).width();var windowHeightNew=$(window).height();if(windowWidth!=windowWidthNew||windowHeight!=windowHeightNew){windowWidth=windowWidthNew;windowHeight=windowHeightNew;el.children().width(getSlideWidth());if(slider.loaded)slider.viewport.css('height',getViewportHeight());if(slider.active.last)slider.active.index=getPagerQty()-1;if(slider.active.index>=getPagerQty())slider.active.last=true;if(slider.settings.pager){populatePager();updatePagerActive(slider.active.index);}
setSlidePosition();}});init();return this;}})(jQuery);