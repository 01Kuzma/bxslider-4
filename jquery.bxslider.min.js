/**
 * BxSlider v4.0 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */
(function(e){e.fn.bxSlider=function(i){var s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,delay:2e3,easing:"swing",slideMargin:0,startSlide:0,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,startText:"Start",stopText:"Stop",auto:!1,autoStart:!0,autoDirection:"next",autoControls:!1,autoControlsCombine:!1,autoControlsSelector:null,autoHover:!1,autoDelay:0,captions:!1,ticker:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,adaptiveHeight:!0,adaptiveHeightSpeed:500,touchEnabled:!0,video:!1,swipeThreashold:50,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}},t=this.children(":first");slider={};var l=function(){slider.settings=e.extend({},s,i),slider.children=t.children(slider.settings.slideSelector),slider.active={index:slider.settings.startSlide},slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1,slider.minThreashold=slider.settings.minSlides*slider.settings.slideWidth+(slider.settings.minSlides-1)*slider.settings.slideMargin,slider.maxThreashold=slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin,slider.working=!1,slider.controls={},r(),slider.settings.ticker&&M(),slider.settings.pager&&E(slider.settings.startSlide),slider.settings.controls&&y(),slider.settings.touchEnabled&&z()},r=function(){if(t.wrap('<div class="bx-viewport" />'),slider.viewport=t.parent(),slider.loader=e('<div class="bx-loading" />'),slider.viewport.prepend(slider.loader),t.css({width:slider.settings.mode=="horizontal"?"999999px":"auto",height:0,overflow:"hidden",position:"relative",margin:0,padding:0}),slider.viewport.css({width:"100%",height:"50",overflow:"hidden",position:"relative"}),slider.children.css({"float":slider.settings.mode=="horizontal"?"left":"none",position:"relative",width:o(),listStyle:"none",marginRight:slider.settings.mode=="horizontal"?slider.settings.slideMargin:0,marginBottom:slider.settings.mode=="vertical"?slider.settings.slideMargin:0}),slider.settings.mode=="fade"&&(slider.children.css({position:"absolute",zIndex:0,display:"none"}),slider.children.eq(slider.settings.startSlide).css({zIndex:50,display:"block"})),slider.controls.el=e('<div class="bx-controls" />'),slider.settings.captions&&x(),slider.settings.infiniteLoop&&!slider.carousel&&slider.settings.mode!="fade"){var i=slider.children.first().clone().addClass("bx-clone"),s=slider.children.last().clone().addClass("bx-clone");t.append(i).prepend(s)}slider.active.last=slider.settings.startSlide==c()-1,slider.settings.video&&t.fitVids(),d(function(){t.css("overflow","visible"),h(),slider.settings.mode=="vertical"&&(slider.settings.adaptiveHeight=!0),slider.viewport.animate({height:n()},200),slider.settings.auto&&slider.settings.autoStart&&k(),slider.settings.onSliderLoad()}),slider.settings.ticker||(slider.settings.pager&&v(),slider.settings.controls&&u(),slider.settings.auto&&slider.settings.autoControls&&f(),(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)&&slider.viewport.after(slider.controls.el))},d=function(i){var s=slider.children.find("img, iframe"),t=0;s.length>0?s.each(function(){var l=e(this);l.load(function(){++t,s.length==t&&(slider.loader.remove(),i())})}).each(function(){this.complete&&e(this).load()}):i()},n=function(){var i=0,s="";return s=slider.settings.mode=="vertical"||slider.settings.adaptiveHeight?slider.carousel?slider.active.last?slider.children.slice(slider.children.length-slider.settings.minSlides,slider.children.length):slider.children.slice(slider.active.index*g(),slider.settings.minSlides+slider.active.index*g()):slider.children.eq(slider.active.index):slider.children,slider.settings.mode=="vertical"?(s.each(function(){i+=e(this).outerHeight()}),slider.settings.slideMargin>0&&(i+=slider.settings.slideMargin*(slider.settings.minSlides-1))):i=Math.max.apply(Math,s.map(function(){return e(this).outerHeight()}).get()),i},o=function(){var e=slider.settings.slideWidth,i=slider.viewport.width();return slider.settings.slideWidth==0?e=i:i>slider.maxThreashold?e=(i-slider.settings.slideMargin*(slider.settings.maxSlides-1))/slider.settings.maxSlides:slider.minThreashold>i&&(e=(i-slider.settings.slideMargin*(slider.settings.minSlides-1))/slider.settings.minSlides),e},a=function(){var e=1;if(slider.settings.mode=="horizontal")if(slider.minThreashold>slider.viewport.width())e=slider.settings.minSlides;else if(slider.viewport.width()>slider.maxThreashold)e=slider.settings.maxSlides;else{var i=slider.children.first().width();e=Math.floor(slider.viewport.width()/i)}else slider.settings.mode=="vertical"&&(e=slider.settings.minSlides);return e},c=function(){var e=0;if(slider.settings.moveSlides>0){var i=0,s=0;while(slider.children.length>i)++e,i=s+a(),s+=a()>=slider.settings.moveSlides?slider.settings.moveSlides:a()}else e=Math.ceil(slider.children.length/a());return e},g=function(){return slider.settings.moveSlides>0&&a()>=slider.settings.moveSlides?slider.settings.moveSlides:a()},h=function(){if(slider.active.last){if(slider.settings.mode=="horizontal"){var e=slider.children.last(),i=e.position();t.css("left",-(i.left-(slider.viewport.width()-e.width())))}else if(slider.settings.mode=="vertical"){var s=slider.children.length-slider.settings.minSlides,i=slider.children.eq(s).position();t.css("top",-i.top)}}else{var i=slider.children.eq(slider.active.index*g()).position();slider.active.index==c()-1&&(slider.active.last=!0),i!=void 0&&(slider.settings.mode=="horizontal"?t.css("left",-i.left):slider.settings.mode=="vertical"&&t.css("top",-i.top))}},p=function(){var i="";pagerQty=c();for(var s=0;pagerQty>s;s++){var t=slider.settings.buildPager&&e.isFunction(slider.settings.buildPager)?slider.settings.buildPager(s,e(val)):s+1;i+='<div class="bx-pager-item"><a href="" data-slide-index="'+s+'" class="bx-pager-link">'+t+"</a></div>"}slider.pagerEl.html(i)},v=function(){slider.pagerEl=e('<div class="bx-pager" />'),slider.pagerEl.delegate(".bx-pager-link","click",T),slider.settings.pagerSelector?e(slider.settings.pagerSelector).html(slider.pagerEl):slider.controls.el.addClass("bx-has-pager").append(slider.pagerEl),p()},u=function(){slider.controls.next=e('<a class="bx-next" href="">'+slider.settings.nextText+"</a>"),slider.controls.prev=e('<a class="bx-prev" href="">'+slider.settings.prevText+"</a>"),slider.controls.next.bind("click",m),slider.controls.prev.bind("click",S),slider.settings.nextSelector&&e(slider.settings.nextSelector).append(slider.controls.next),slider.settings.prevSelector&&e(slider.settings.prevSelector).append(slider.controls.prev),slider.settings.nextSelector||slider.settings.prevSelector||(slider.controls.directionEl=e('<div class="bx-controls-direction" />'),slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next),slider.controls.el.addClass("bx-has-controls-direction").append(slider.controls.directionEl))},f=function(){slider.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+"</a></div>"),slider.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+"</a></div>"),slider.controls.autoEl=e('<div class="bx-controls-auto" />'),slider.controls.autoEl.delegate(".bx-start","click",w),slider.controls.autoEl.delegate(".bx-stop","click",b),slider.settings.autoControlsCombine?slider.controls.autoEl.append(slider.controls.start):slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop),slider.settings.autoControlsSelector?e(slider.settings.autoControlsSelector).html(slider.controls.autoEl):slider.controls.el.addClass("bx-has-controls-auto").append(slider.controls.autoEl),q(slider.settings.autoStart?"stop":"start")},x=function(){slider.children.each(function(){var i=e(this).find("img:first").attr("title");e(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},m=function(e){slider.settings.auto&&t.stopAuto(),t.goToNextSlide(),e.preventDefault()},S=function(e){slider.settings.auto&&t.stopAuto(),t.goToPrevSlide(),e.preventDefault()},w=function(e){t.startAuto(),e.preventDefault()},b=function(e){t.stopAuto(),e.preventDefault()},T=function(i){slider.settings.auto&&t.stopAuto();var s=e(i.currentTarget),l=parseInt(s.attr("data-slide-index"));l!=slider.active.index&&t.goToSlide(l),i.preventDefault()},E=function(e){return slider.settings.pagerType=="short"?(slider.pagerEl.html(e+1+slider.settings.pagerShortSeparator+slider.children.length),void 0):(slider.pagerEl.find("a").removeClass("active"),slider.pagerEl.find("a").eq(e).addClass("active"),void 0)},C=function(){if(!slider.carousel&&slider.settings.infiniteLoop)if(slider.active.index==0){var e=slider.children.eq(0).position();slider.settings.mode=="horizontal"?t.css("left",-e.left):slider.settings.mode=="vertical"&&t.css("top",-e.top)}else if(slider.active.index==slider.children.length-1){var e=slider.children.eq(slider.children.length-1).position();slider.settings.mode=="horizontal"?t.css("left",-e.left):slider.settings.mode=="vertical"&&t.css("top",-e.top)}slider.working=!1,slider.settings.onSlideAfter(slider.children.eq(slider.active.index))},q=function(e){slider.settings.autoControlsCombine?slider.controls.autoEl.html(slider.controls[e]):(slider.controls.autoEl.find("a").removeClass("active"),slider.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},y=function(){!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd&&(slider.controls.directionEl.empty(),slider.active.index==0?slider.controls.directionEl.append(slider.controls.next):slider.active.index==c()-1?slider.controls.directionEl.append(slider.controls.prev):slider.controls.directionEl.append(slider.controls.prev,slider.controls.next))},z=function(){slider.touch={start:{x:null,y:null},end:{x:null,y:null}},slider.viewport.bind("touchstart",function(e){var i=e.originalEvent;slider.touch.start.x=i.changedTouches[0].pageX}),slider.viewport.bind("touchend",function(e){var i=e.originalEvent;slider.touch.end.x=i.changedTouches[0].pageX;var s=Math.abs(slider.touch.start.x-slider.touch.end.x);s>=slider.settings.swipeThreashold&&(slider.touch.start.x>slider.touch.end.x?t.goToNextSlide():t.goToPrevSlide())})},k=function(){slider.settings.autoDelay>0?setTimeout(t.startAuto,slider.settings.autoDelay):t.startAuto(),slider.settings.autoHover&&t.hover(function(){slider.interval&&(t.stopAuto(!0),slider.autoPaused=!0)},function(){slider.autoPaused&&(t.startAuto(!0),slider.autoPaused=null)})},M=function(){slider.settings.autoDirection=="next"?t.append(slider.children.clone().addClass("bx-clone")):(t.prepend(slider.children.clone().addClass("bx-clone")),t.css("left",-slider.children.eq(slider.children.length).position().left)),slider.settings.pager=!1,slider.settings.controls=!1,slider.settings.autoControls=!1,P()},P=function(){var e=0,i=0;slider.settings.autoDirection=="next"?e=-slider.children.eq(slider.children.length).position().left:i=-slider.children.first().position().left,t.animate({left:e},slider.settings.speed,"linear",function(){t.css("left",i),P()})};t.goToSlide=function(i,s){if(!slider.working&&slider.active.index!=i)if(slider.working=!0,slider.active.index=0>i?slider.children.length-1:i>=slider.children.length?0:i,slider.settings.onSlideBefore(slider.children.eq(slider.active.index)),s=="next"?slider.settings.onSlideNext(slider.children.eq(slider.active.index)):s=="prev"&&slider.settings.onSlidePrev(slider.children.eq(slider.active.index)),slider.active.last=i>=c()-1,slider.settings.pager&&E(slider.active.index),slider.settings.controls&&y(),slider.settings.mode=="fade")slider.settings.adaptiveHeight&&slider.viewport.height()!=n()&&slider.viewport.animate({height:n()},slider.settings.adaptiveHeightSpeed),slider.children.filter(":visible").fadeOut(slider.settings.speed).css({zIndex:0}),slider.children.eq(slider.active.index).css("zIndex",51).fadeIn(slider.settings.speed,function(){e(this).css("zIndex",50),C()});else{slider.settings.adaptiveHeight&&slider.viewport.height()!=n()&&slider.viewport.animate({height:n()},slider.settings.adaptiveHeightSpeed);var l=0,r={left:0,top:0};if(slider.carousel&&slider.active.last)if(slider.settings.mode=="horizontal"){var d=slider.children.eq(slider.children.length-1);r=d.position(),l=slider.viewport.width()-d.width()}else{var o=slider.children.length-slider.settings.minSlides;r=slider.children.eq(o).position()}else if(slider.active.last&&slider.active.index==0)r=t.find(".bx-clone:last").position(),slider.active.last=!1;else if(i>=0){var a=i*g();r=slider.children.eq(a).position()}var h=slider.settings.mode=="horizontal"?{left:-(r.left-l)}:{top:-r.top};t.animate(h,slider.settings.speed,slider.settings.easing,function(){C()})}},t.goToNextSlide=function(){if(slider.settings.infiniteLoop||!slider.active.last){var e=slider.active.index+1;slider.carousel&&slider.settings.infiniteLoop&&e>=c()&&(e=0),t.goToSlide(e,"next")}},t.goToPrevSlide=function(){if(slider.settings.infiniteLoop||slider.active.index!=0){var e=slider.active.index-1;slider.carousel&&slider.settings.infiniteLoop&&0>e&&(e=c()-1),t.goToSlide(e,"prev")}},t.startAuto=function(e){slider.interval||(slider.interval=setInterval(function(){slider.settings.autoDirection=="next"?t.goToNextSlide():t.goToPrevSlide()},slider.settings.delay),slider.settings.autoControls&&e!=1&&q("stop"))},t.stopAuto=function(e){slider.interval&&(clearInterval(slider.interval),slider.interval=null,slider.settings.autoControls&&e!=1&&q("start"))},t.getCurrentSlide=function(){return slider.active.index},t.getSlideCount=function(){return slider.children.length};var A=e(window).width(),D=e(window).height();return e(window).resize(function(){var i=e(window).width(),s=e(window).height();(A!=i||D!=s)&&(A=i,D=s,slider.children.add(t.find(".bx-clone")).width(o()),slider.viewport.css("height",n()),slider.active.last&&(slider.active.index=c()-1),slider.active.index>=c()&&(slider.active.last=!0),slider.settings.pager&&(p(),E(slider.active.index)),h())}),l(),this}})(jQuery)