/**
 * BxSlider v4.0 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Written by: Steven Wanderski, 2012
 * http://stevenwanderski.com
 * (while drinking Belgian ales and listening to jazz)
 *
 * CEO and founder of bxCreative, LTD
 * http://bxcreative.com
 */
(function(t){t.fn.bxSlider=function(e){var i={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,delay:2e3,easing:"swing",slideMargin:0,startSlide:0,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,controls:!0,controlsSelector:null,nextText:"Next",prevText:"Prev",startText:"Start",stopText:"Stop",auto:!1,autoStart:!0,autoDirection:"next",autoControls:!1,autoControlsCombine:!1,autoHover:!1,autoDelay:0,captions:!1,ticker:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,adaptiveHeight:!0,adaptiveHeightSpeed:500,touchEnabled:!0,swipeThreashold:50,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}},n=this.children(":first"),s={},o=function(){s.settings=t.extend({},i,e),s.children=n.children(s.settings.slideSelector),s.active={index:s.settings.startSlide},s.loaded=!1,s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.minThreashold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreashold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},l(),s.settings.ticker&&P(),s.settings.pager&&C(s.settings.startSlide),s.settings.controls&&z(),s.settings.touchEnabled&&k()},l=function(){if(n.wrap('<div class="bx-viewport" />'),s.viewport=n.parent(),s.loader=t('<div class="bx-loading" />'),s.viewport.prepend(s.loader),n.css({width:s.settings.mode=="horizontal"?"999999px":"auto",height:0,overflow:"hidden",position:"relative",margin:0,padding:0}),s.viewport.css({width:"100%",height:"50",overflow:"hidden",position:"relative"}),s.children.css({"float":s.settings.mode=="horizontal"?"left":"none",position:"relative",width:d(),listStyle:"none",marginRight:s.settings.mode=="horizontal"?s.settings.slideMargin:0,marginBottom:s.settings.mode=="vertical"?s.settings.slideMargin:0}),s.settings.mode=="fade"&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),n.children().eq(s.settings.startSlide).css({zIndex:50,display:"block"})),s.controls.el=t('<div class="bx-controls" />'),s.settings.captions&&m(),s.settings.infiniteLoop&&!s.carousel&&s.settings.mode!="fade"){var e=n.children(":first").clone().addClass("bx-clone"),i=n.children(":last").clone().addClass("bx-clone");n.append(e).prepend(i)}s.active.last=s.settings.startSlide==g()-1,a(function(){n.css("overflow","visible"),p(),s.settings.mode=="vertical"&&(s.settings.adaptiveHeight=!0),s.viewport.animate({height:r()},200),s.settings.auto&&s.settings.autoStart&&M(),s.settings.onSliderLoad(),s.loaded=!0}),s.settings.ticker||(s.settings.pager&&u(),s.settings.controls&&f(),s.settings.auto&&s.settings.autoControls&&x(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el))},a=function(e){var i=n.find("img"),o=0;i.length>0?i.each(function(){var n=t(this);n.load(function(){++o,i.length==o&&(s.loader.remove(),e())})}).each(function(){this.complete&&t(this).load()}):e()},r=function(){var e=0,i="";return i=s.settings.mode=="vertical"||s.settings.adaptiveHeight?s.carousel?s.active.last?n.children().slice(s.children.length-s.settings.minSlides,s.children.length):n.children().slice(s.active.index*h(),s.settings.minSlides+s.active.index*h()):n.children(":not(.bx-clone)").eq(s.active.index):n.children(":not(.bx-clone)"),s.settings.mode=="vertical"?(i.each(function(){e+=t(this).outerHeight()}),s.settings.slideMargin>0&&(e+=s.settings.slideMargin*(s.settings.minSlides-1))):e=Math.max.apply(Math,i.map(function(){return t(this).outerHeight()}).get()),e},d=function(){var t=s.settings.slideWidth,e=s.viewport.width();return s.settings.slideWidth==0?t=e:e>s.maxThreashold?t=(e-s.settings.slideMargin*(s.settings.maxSlides-1))/s.settings.maxSlides:s.minThreashold>e&&(t=(e-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides),t},c=function(){var t=1;if(s.settings.mode=="horizontal")if(s.minThreashold>s.viewport.width())t=s.settings.minSlides;else if(s.viewport.width()>s.maxThreashold)t=s.settings.maxSlides;else{var e=n.children(":first").width();t=Math.floor(s.viewport.width()/e)}else s.settings.mode=="vertical"&&(t=s.settings.minSlides);return t},g=function(){var t=0;if(s.settings.moveSlides>0){var e=0,i=0;while(s.children.length>e)++t,e=i+c(),i+=c()>=s.settings.moveSlides?s.settings.moveSlides:c()}else t=Math.ceil(s.children.length/c());return t},h=function(){return s.settings.moveSlides>0&&c()>=s.settings.moveSlides?s.settings.moveSlides:c()},p=function(){if(s.active.last){if(s.settings.mode=="horizontal"){var t=n.children(":not(.bx-clone):last"),e=t.position();n.css("left",-(e.left-(s.viewport.width()-t.width())))}else if(s.settings.mode=="vertical"){var i=s.children.length-s.settings.minSlides,e=n.children().not(".bx-clone").eq(i).position();n.css("top",-e.top)}}else{var e=n.children().not(".bx-clone").eq(s.active.index*h()).position();s.active.index==g()-1&&(s.active.last=!0),e!=void 0&&(s.settings.mode=="horizontal"?n.css("left",-e.left):s.settings.mode=="vertical"&&n.css("top",-e.top))}},v=function(){var e="";pagerQty=g();for(var i=0;pagerQty>i;i++){var n=s.settings.buildPager&&t.isFunction(s.settings.buildPager)?s.settings.buildPager(i,t(val)):i+1;e+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+n+"</a></div>"}s.pagerEl.html(e)},u=function(){s.pagerEl=t('<div class="bx-pager" />'),s.pagerEl.delegate(".bx-pager-link","click",T),s.settings.pagerSelector?t(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),v()},f=function(){s.controls.next=t('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=t('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.directionEl=t('<div class="bx-controls-direction" />'),s.controls.directionEl.delegate(".bx-next","click",S),s.controls.directionEl.delegate(".bx-prev","click",w),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.settings.controlsSelector?t(s.settings.controlsSelector).html(s.controls.directionEl):s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl)},x=function(){s.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=t('<div class="bx-controls-auto" />'),s.controls.autoEl.delegate(".bx-start","click",b),s.controls.autoEl.delegate(".bx-stop","click",E),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?t(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),y(s.settings.autoStart?"stop":"start")},m=function(){n.children().each(function(){var e=t(this).find("img:first").attr("title");t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},S=function(t){s.settings.auto&&n.stopAuto(),n.goToNextSlide(),t.preventDefault()},w=function(t){s.settings.auto&&n.stopAuto(),n.goToPrevSlide(),t.preventDefault()},b=function(t){n.startAuto(),t.preventDefault()},E=function(t){n.stopAuto(),t.preventDefault()},T=function(e){s.settings.auto&&n.stopAuto();var i=t(e.currentTarget),o=parseInt(i.attr("data-slide-index"));o!=s.active.index&&n.goToSlide(o),e.preventDefault()},C=function(t){return s.settings.pagerType=="short"?(s.pagerEl.html(t+1+s.settings.pagerShortSeparator+s.children.length),void 0):(s.pagerEl.find("a").removeClass("active"),s.pagerEl.find("a").eq(t).addClass("active"),void 0)},q=function(){if(!s.carousel&&s.settings.infiniteLoop)if(s.active.index==0){var t=n.children(":not(.bx-clone)").eq(0).position();s.settings.mode=="horizontal"?n.css("left",-t.left):s.settings.mode=="vertical"&&n.css("top",-t.top)}else if(s.active.index==s.children.length-1){var t=n.children(":not(.bx-clone)").eq(s.children.length-1).position();s.settings.mode=="horizontal"?n.css("left",-t.left):s.settings.mode=="vertical"&&n.css("top",-t.top)}s.working=!1,s.settings.onSlideAfter(n.children().eq(s.active.index))},y=function(t){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[t]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},z=function(){!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(s.controls.directionEl.empty(),s.active.index==0?s.controls.directionEl.append(s.controls.next):s.active.index==g()-1?s.controls.directionEl.append(s.controls.prev):s.controls.directionEl.append(s.controls.prev,s.controls.next))},k=function(){s.touch={start:{x:null,y:null},end:{x:null,y:null}},s.viewport.bind("touchstart",function(t){var e=t.originalEvent;s.touch.start.x=e.changedTouches[0].pageX}),s.viewport.bind("touchend",function(t){var e=t.originalEvent;s.touch.end.x=e.changedTouches[0].pageX;var i=Math.abs(s.touch.start.x-s.touch.end.x);i>=s.settings.swipeThreashold&&(s.touch.start.x>s.touch.end.x?n.goToNextSlide():n.goToPrevSlide())})},M=function(){s.settings.autoDelay>0?setTimeout(n.startAuto,s.settings.autoDelay):n.startAuto(),s.settings.autoHover&&n.hover(function(){s.interval&&(n.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(n.startAuto(!0),s.autoPaused=null)})},P=function(){s.settings.autoDirection=="next"?n.append(n.children().clone().addClass("bx-clone")):(n.prepend(n.children().clone().addClass("bx-clone")),n.css("left",-n.children().eq(s.children.length).position().left)),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,A()},A=function(){var t=0,e=0;s.settings.autoDirection=="next"?t=-n.children().eq(s.children.length).position().left:e=-n.children(":not(.bx-clone):first").position().left,n.animate({left:t},s.settings.speed,"linear",function(){n.css("left",e),A()})};n.goToSlide=function(e,i){if(!s.working&&s.active.index!=e)if(s.working=!0,s.active.index=0>e?s.children.length-1:e>=s.children.length?0:e,s.settings.onSlideBefore(n.children().eq(s.active.index)),i=="next"?s.settings.onSlideNext(n.children().eq(s.active.index)):i=="prev"&&s.settings.onSlidePrev(n.children().eq(s.active.index)),s.active.last=e>=g()-1,s.settings.pager&&C(s.active.index),s.settings.controls&&z(),s.settings.mode=="fade")s.settings.adaptiveHeight&&s.viewport.height()!=r()&&s.viewport.animate({height:r()},s.settings.adaptiveHeightSpeed),n.children(":visible").fadeOut(s.settings.speed).css({zIndex:0}),n.children().eq(s.active.index).css("zIndex",51).fadeIn(s.settings.speed,function(){t(this).css("zIndex",50),q()});else{s.settings.adaptiveHeight&&s.viewport.height()!=r()&&s.viewport.animate({height:r()},s.settings.adaptiveHeightSpeed);var o=0,l={left:0,top:0};if(s.carousel&&s.active.last)if(s.settings.mode=="horizontal"){var a=n.children().eq(s.children.length-1);l=a.position(),o=s.viewport.width()-a.width()}else{var d=s.children.length-s.settings.minSlides;l=n.children().eq(d).position()}else if(s.active.last&&s.active.index==0)l=n.find(".bx-clone:last").position();else if(e>=0){var c=e*h();l=n.children().not(".bx-clone").eq(c).position()}var p=s.settings.mode=="horizontal"?{left:-(l.left-o)}:{top:-l.top};n.animate(p,s.settings.speed,s.settings.easing,function(){q()})}},n.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var t=s.active.index+1;s.carousel&&s.settings.infiniteLoop&&t>=g()&&(t=0),n.goToSlide(t,"next")}},n.goToPrevSlide=function(){if(s.settings.infiniteLoop||s.active.index!=0){var t=s.active.index-1;s.carousel&&s.settings.infiniteLoop&&0>t&&(t=g()-1),n.goToSlide(t,"prev")}},n.startAuto=function(t){s.interval||(s.interval=setInterval(function(){s.settings.autoDirection=="next"?n.goToNextSlide():n.goToPrevSlide()},s.settings.delay),s.settings.autoControls&&t!=1&&y("stop"))},n.stopAuto=function(t){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&t!=1&&y("start"))},n.getCurrentSlide=function(){return s.active.index},n.getSlideCount=function(){return s.children.length};var D=t(window).width(),H=t(window).height();return t(window).resize(function(){var e=t(window).width(),i=t(window).height();(D!=e||H!=i)&&(D=e,H=i,n.children().width(d()),s.loaded&&s.viewport.css("height",r()),s.active.last&&(s.active.index=g()-1),s.active.index>=g()&&(s.active.last=!0),s.settings.pager&&(v(),C(s.active.index)),p())}),o(),this}})(jQuery)